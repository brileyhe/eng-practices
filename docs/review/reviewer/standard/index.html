<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Code Review 标准 | 谷歌工程实践</title>


<link rel="stylesheet" href="/eng-practices/book.min.3b2edc99087fbcaaa6b2f5a7f984e6f6bb9c1245c757de04c44f5a738d1b52c1.css" integrity="sha256-Oy7cmQh/vKqmsvWn&#43;YTm9rucEkXHV94ExE9ac40bUsE=">


<script defer src="/eng-practices/search.min.4834e7e0e267233731129f6a2972a69d565a00b73996cf0ecd0477c7838d55ba.js" integrity="sha256-SDTn4OJnIzcxEp9qKXKmnVZaALc5ls8OzQR3x4ONVbo="></script>



<link rel="icon" href="/eng-practices/favicon.png" type="image/x-icon">


<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
<meta name="baidu-site-verification" content="g8IYR9SNLF" />


<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?11f7d254cfa4e0ca44b175c66d379ecc";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>



<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TRBZ6RN');</script>


</head>

<body>
  <input type="checkbox" class="hidden" id="menu-control" />
  <main class="flex container">

    <aside class="book-menu fixed">
      <nav>
<h2 class="book-brand">
  <a href="https://jimmysong.io/eng-practices"><span>谷歌工程实践</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" placeholder="Search" id="book-search-input" maxlength="64" readonly />
  <div class="book-search-spinner spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>





    
  
  
  

  <style>
  nav ul a[href$="\2f eng-practices\2f docs\2freview\2freviewer\2fstandard\2f "] {
      color: #004ed0;
  }
  </style>

<ul>
<li><a href="/eng-practices/docs/review/"><strong>谷歌代码审查指南</strong></a></li>
<li><a href="/eng-practices/docs/review/reviewer/"><strong>代码审查者指南</strong></a>

<ul>
<li><a href="/eng-practices/docs/review/reviewer/standard/">Code Review 标准</a></li>
<li><a href="/eng-practices/docs/review/reviewer/looking-for/">Code Review 要点</a></li>
<li><a href="/eng-practices/docs/review/reviewer/navigate/">查看 CL 的步骤</a></li>
<li><a href="/eng-practices/docs/review/reviewer/speed/">Code Review 速度</a></li>
<li><a href="/eng-practices/docs/review/reviewer/comments/">如何撰写 Code Review 评论</a></li>
<li><a href="/eng-practices/docs/review/reviewer/pushback/">处理 Code Review 中的拖延</a></li>
</ul></li>
<li><a href="/eng-practices/docs/review/developer/"><strong>代码开发者指南</strong></a>

<ul>
<li><a href="/eng-practices/docs/review/developer/cl-descriptions/">写好 CL 描述</a></li>
<li><a href="/eng-practices/docs/review/developer/small-cls/">小型 CL</a></li>
<li><a href="/eng-practices/docs/review/developer/handling-comments/">如何处理审查者的评论</a></li>
</ul></li>
</ul>







</nav>


<script>
(function() {
  var menu = document.querySelector("aside.book-menu nav");
  addEventListener("beforeunload", function(event) {
    localStorage.setItem("menu.scrollTop", menu.scrollTop);
  });
  menu.scrollTop = localStorage.getItem("menu.scrollTop");
})();
</script>

    </aside>

    <div class="book-page">
      <header class="flex align-center justify-between book-header">
  <label for="menu-control">
    <img src="/eng-practices/svg/menu.svg" alt="Menu" />
  </label>
  <strong>Code Review 标准</strong>
</header>

      
<article class="markdown">

<h1 id="code-review-标准">Code Review 标准</h1>

<p>代码审查的主要目的是确保逐步改善 Google 代码库的整体健康状况。代码审查的所有工具和流程都是为此而设计的。</p>

<p>为了实现此目标，必须做出一系列权衡。</p>

<p>首先，开发人员必须能够对任务进行<strong>改进</strong>。如果开发者从未向代码库提交过代码，那么代码库的改进也就无从谈起。此外，如果审核人员对代码吹毛求疵，那么开发人员以后也很难再做出改进。</p>

<p>另外，审查者有责任确保随着时间的推移，CL 的质量不会使代码库的整体健康状况下降。这可能很棘手，因为通常情况下，代码库健康状况会随着时间的而下降，特别是在对团队有严格的时间要求时，团队往往会采取捷径来达成他们的目标。</p>

<p>此外，审查者应对正在审核的代码负责并拥有所有权。审查者希望确保代码库保持一致、可维护及 <a href="../looking-for">Code Review 要点</a>中所提及的所有其他内容。</p>

<p>因此，我们将以下规则作为 Code Review 中期望的标准：</p>

<p><strong>一般来说，审核人员应该倾向于批准 CL，只要 CL 确实可以提高系统的整体代码健康状态，即使 CL 并不完美。</strong></p>

<p>这是所有 Code Review 指南中的<strong>高级</strong>原则。</p>

<p>当然，也有一些限制。例如，如果 CL 添加了审查者认为系统中不需要的功能，那么即使代码设计良好，审查者依然可以拒绝批准它。</p>

<p>此处有一个关键点就是没有“完美”的代码，只有<strong>更好的</strong>代码。审查者不该要求开发者在批准程序前仔细清理、润色 CL 每个角落。相反，审查者应该在变更的重要性与取得进展之间取得平衡。审查者不应该追求完美，而应是追求持续改进。不要因为一个 CL不是“完美的”，就将可以提高系统的可维护性、可读性和可理解性的 CL 延迟数天或数周才批准。</p>

<p>审核者应该随时在可以改善的地方留下审核评论，但如果评论不是很重要，请在评论语句前加上“Nit：”之类的内容，让开发者知道这条评论是用来指出可以润色的地方，而他们可以选择是否忽略。</p>

<p>注意：本文档中没有任何内容证明检查 CL 肯定会使系统的整体代码健康状况恶化。您会做这中事情应该只有在<a href="../../emergencies">紧急情况</a>时。</p>

<h2 id="指导">指导</h2>

<p>代码审查具有向开发人员传授语言、框架或通用软件设计原则新内容的重要功能。留下评论可以帮助开发人员学习新东西，这总归是很好的。分享知识是随着长年累月改善系统代码健康状况的一部分。请记住，如果您的评论纯粹是教育性的，且对于本文档中描述的标准并不重要，请在其前面添加“Nit：”或以其他方式表明作者不必在此 CL 中解决它。</p>

<h2 id="principles">原则</h2>

<ul>
<li>基于技术事实和数据否决意见和个人偏好。</li>
<li>关于代码风格问题，<a href="http://google.github.io/styleguide/">风格指南</a>是绝对权威。任何不在风格指南中的纯粹风格点（例如空白等）都是个人偏好的问题。代码风格应该与风格指南中的一致。如果没有以前的风格，请接受作者的风格。</li>
<li><strong>软件设计方面几乎不是纯粹的风格或个人偏好问题。</strong>软件设计基于基本原则且应该权衡这些原则，而不仅仅是个人意见。有时候会有多种有效的选择。如果作者可以证明（通过数据或基于可靠的工程原理）该方法同样有效，那么审查者应该接受作者的偏好。否则，就要取决于软件设计的标准原则。</li>
<li>如果没有其他适用规则，则审查者可以要求作者与当前代码库中的内容保持一致，只要不恶化系统的整体代码健康状况即可。</li>
</ul>

<h2 id="conflicts">解决冲突</h2>

<p>如果在代码审查过程中有任何冲突，第一步应该始终是开发人员和审查者根据本文档中的 <a href="../../developer/">CL 开发者指南</a>和<a href="../../">审查者指南</a>达成共识。</p>

<p>当达成共识变得特别困难时，审阅者和开发者可以进行面对面的会议，或者有 VC 参与调停，而不仅仅是试着通过代码审查评论来解决冲突。 （但是，如果您这样做了，请确保在 CL 的评论中记录讨论结果，以供将来的读者使用。）</p>

<p>如果这样还不能解决问题，那么解决该问题最常用方法是将问题升级。通常是将问题升级为更广泛的团队讨论，有一个 TL 权衡，要求维护人员对代码作出决定，或要求工程经理的帮助。 <strong>不要因为 CL 的开发者和审查者不能达成一致，就让 CL 在那里卡壳。</strong></p>

<p>下一篇：<a href="../looking-for">Code Review 要点</a></p>
</article>

      
<div class="book-footer justify-end">
  
  
  <div>
    <a href="https://github.com/rootsongjc/eng-practices/edit/master/content/docs/review/reviewer/standard.md" target="_blank" rel="noopener">
      <img src="/eng-practices/svg/edit.svg" alt="Edit" /> Edit this page
    </a>
  </div>
  
</div>


      
    </div>

    
  

  <aside class="book-toc level-3 fixed">
    <nav id="TableOfContents">
<ul>
<li><a href="#code-review-标准">Code Review 标准</a>
<ul>
<li><a href="#指导">指导</a></li>
<li><a href="#principles">原则</a></li>
<li><a href="#conflicts">解决冲突</a></li>
</ul></li>
</ul>
</nav>
  </aside>



  </main>

  
  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-93485976-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</body>

</html>
